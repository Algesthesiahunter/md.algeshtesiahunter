# 前言

qiankun模式是企业级后台迁移微前端的一个标杆模式，稍微有点技术的企业都会选择基于qiankun技术来自定义一套符合自身的微前端技术体系，所以这里面技术大部分是相通的，我司也不例外，在迁移微前端架构中有种种疑问，现在我们一起解密这个黑盒

# qiankun类微前端内核实现主要功能

1. JS沙箱：子应用之间互不影响，包括全局变量、事件等等
2. CSS隔离：子应用之间样式互不影响
3. Config Entry：配置每个子应用的JS和CSS
4. 按需加赞：切换到相应页面才加载对应资源
5. 公共依赖加载：大部分子应用都需要用到的资源如何处理
6. 预加载：空闲时间加载子应用资源
7. 父子应用通信：子应用如何触发父级应用方法、父级应用如何调子级方法

> 单纯论微前端有多种方式，上面列表微前端核心功能也有多种实现方式，为了高效专注解密，本主题仅仅解密类qiankun微前端内核处理方式

## JS沙箱

## CSS沙箱

核心原理：利用`css属性选择器`层叠类似`vue scoped`的方式做样式隔离，被隔离的应用的样式表会被特定规则改写成如下模式

``` css
div .react15-lib{
color: rgb(129, 143, 247);
}
```

``` css
div[data-qiankun="react15"] .react15-lib {
    color: rgb(129, 143, 247);
}
```
